<div class="translator-container">
    <div class="lang-controls">
        <!-- Just for visual alignment if needed, or we can put the swap button in the middle -->
    </div>

    <!-- Info Accordion -->
    <mat-accordion class="info-accordion">
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Chrome Built-in AI APIs
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="info-content">
                <h3>Stable APIs (Available Now)</h3>

                <h4>Translator API</h4>
                <p>
                    L'API sperimentale <strong>Translator API</strong> consente di eseguire traduzioni in tempo reale
                    direttamente nel browser, senza chiamate lato server. Ãˆ ideale per app offline o che necessitano
                    di bassa latenza.
                </p>

                <h4>Language Detection API</h4>
                <p>
                    La <strong>Language Detection API</strong> permette di identificare automaticamente la lingua di un
                    testo fornito. Utile per pre-configurare traduttori o adattare l'interfaccia utente.
                </p>

                <h3>Other Experimental APIs</h3>
                <ul>
                    <li><strong>Prompt API:</strong> Per interagire con modelli Gemini Nano integrati in Chrome.</li>
                    <li><strong>Summarization API:</strong> Per generare riassunti di testi lunghi.</li>
                    <li><strong>Write API:</strong> Per assistere nella stesura e riformulazione di testi.</li>
                    <li><strong>Rewriter API:</strong> Per modificare stile, tono o lunghezza di un testo.</li>
                </ul>

                <p style="margin-top: 16px; font-size: 0.9em; color: #666;">
                    * Queste API sono parte dell'iniziativa "Built-in AI" di Chrome e potrebbero richiedere flag
                    specifici
                    o versioni Canary/Dev.
                </p>
            </div>
        </mat-expansion-panel>
    </mat-accordion>

    <div class="translation-panels">
        <!-- Source Panel -->
        <div class="panel source-panel">
            <mat-tab-group [(selectedIndex)]="sourceLangIndex"
                           (selectedTabChange)="onSourceTabChange($event)"
                           animationDuration="0ms">
                @for (lang of languages; track lang.code) {
                <mat-tab [label]="lang.name"></mat-tab>
                }
            </mat-tab-group>

            <mat-form-field appearance="fill"
                            class="text-area-field">
                <textarea matInput
                          placeholder="Enter text"
                          [ngModel]="sourceText()"
                          (ngModelChange)="sourceText.set($event); translate()"
                          rows="10"></textarea>
                @if (sourceText()) {
                <button mat-icon-button
                        matSuffix
                        (click)="sourceText.set(''); translate()">
                    <mat-icon>close</mat-icon>
                </button>
                }
            </mat-form-field>
        </div>

        <!-- Swap Button (Centered Overlay or Flex item) -->
        <div class="swap-container">
            <button mat-icon-button
                    (click)="swapLanguages()">
                <mat-icon>swap_horiz</mat-icon>
            </button>
        </div>

        <!-- Target Panel -->
        <div class="panel target-panel">
            <mat-tab-group [(selectedIndex)]="targetLangIndex"
                           (selectedTabChange)="onTargetTabChange($event)"
                           animationDuration="0ms">
                @for (lang of languages; track lang.code) {
                <mat-tab [label]="lang.name"></mat-tab>
                }
            </mat-tab-group>

            <mat-form-field appearance="fill"
                            class="text-area-field">
                <textarea matInput
                          readonly
                          [value]="translatedText()"
                          rows="10"></textarea>
                <button mat-icon-button
                        matSuffix
                        (click)="copyToClipboard()">
                    <mat-icon>content_copy</mat-icon>
                </button>
            </mat-form-field>
        </div>
    </div>
</div>